<html>
<head>
    <title>ML Vis Seminar</title>
    <script src="node_modules/d3/build/d3.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
<script>

    function formatDate(date){
        let months = ["January", "February", "March", "April", "May", "June",
                      "July", "August", "September", "October", "November", "December"];
        return months[date.month] + " " + date.day + ", " + date.year
    }

    function load_info(){

        let noCache = new Date().getTime();


        d3.json("content.json?_=" + noCache, function(data){
            console.log(data);
            d3.select("#description").append("p").text(data.description);
            for (let i = 0; i < data.events.length; ++i){
                let talk_container = d3.select("#talks").append("div").attr("class","talk_container");
                talk_container.append("h2").text(data.events[i].title);
                let talk_info = talk_container.append("div").attr("class", "talk_info");
                talk_info.append("h3").text(formatDate(data.events[i].date));
                let presenter_info = talk_info.append("div").attr("class", "presenter_info");
                for (let j = 0; j < data.events[i].presenters.length; ++j){
                    if (data.events[i].presenters[j].href){
                        presenter_info.append("a").attr("href", data.events[i].presenters[j].href).text(data.events[i].presenters[j].name);
                    }else{
                        presenter_info.append("span").text(data.events[i].presenters[j].name    )
                    }
                    if (j < data.events[i].presenters.length - 1){
                        presenter_info.append("span").text(", ");
                    }
                }

                let div_materials = talk_info.append("div").attr("class", "materials");

                if (data.events[i].materials.length >0){
                    div_materials.append("span").text("Materials: ")
                }
                for (let j = 0; j < data.events[i].materials.length; ++j){
                    div_materials.append("a").attr("href", data.events[i].materials[j].href).text(data.events[i].materials[j].name);
                    if (j < data.events[i].materials.length - 1){
                        div_materials.append("span").text(", ");
                    }
                }
            }
        })
    }

</script>
</head>

<body onload="load_info()">
    <div id="header">
        <div id="header_logo">
                <div id="logo">
                <img src="img/nyu_logo.png" width="384px" height="60px"/>
                </div>
        </div>
        <div id="purple_line">
        </div>
        <h1>ML Vis Seminar</h1>
    </div>
    <div id="description"></div>
    <div id="talks"></div>
</body>
</html>